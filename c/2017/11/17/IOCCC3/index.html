<!DOCTYPE html>
<html lang="en"><!--
 __  __                __                                     __
/\ \/\ \              /\ \             __                    /\ \
\ \ \_\ \   __  __    \_\ \      __   /\_\      __       ___ \ \ \/'\
 \ \  _  \ /\ \/\ \   /'_` \   /'__`\ \/\ \   /'__`\    /'___\\ \ , <
  \ \ \ \ \\ \ \_\ \ /\ \L\ \ /\  __/  \ \ \ /\ \L\.\_ /\ \__/ \ \ \\`\
   \ \_\ \_\\/`____ \\ \___,_\\ \____\ _\ \ \\ \__/.\_\\ \____\ \ \_\ \_\
    \/_/\/_/ `/___/> \\/__,_ / \/____//\ \_\ \\/__/\/_/ \/____/  \/_/\/_/
                /\___/                \ \____/
                \/__/                  \/___/

Powered by Hydejack v7.5.1 <https://qwtel.com/hydejack/>
-->




<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta http-equiv="x-ua-compatible" content="ie=edge">


  

<title>IOCCC (1985) | The C++ Student</title>
<meta name="description" content="On to 1985
">
<link rel="canonical" href="http://localhost:4000/cplusplusstudent/c/2017/11/17/IOCCC3/">


  


<meta name="mobile-web-app-capable" content="yes">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="The C++ Student">
<meta name="apple-mobile-web-app-status-bar-style" content="black">

<meta name="application-name" content="The C++ Student">
<meta name="msapplication-config" content="/cplusplusstudent/assets/ieconfig.xml">


<meta name="theme-color" content="#A85641">


<meta name="generator" content="Hydejack v7.5.1">

<link type="application/atom+xml" rel="alternate" href="http://localhost:4000/cplusplusstudent/feed.xml" title="The C++ Student" />



<link rel="alternate" href="http://localhost:4000/cplusplusstudent/c/2017/11/17/IOCCC3/" hreflang="en">

<link rel="shortcut icon" href="/cplusplusstudent/assets/icons/favicon.ico">
<link rel="apple-touch-icon" href="/cplusplusstudent/assets/icons/icon.png">

<link rel="manifest" href="/cplusplusstudent/assets/manifest.json">


  <link rel="dns-prefetch" href="https://fonts.googleapis.com">
  <link rel="dns-prefetch" href="https://fonts.gstatic.com">





<link id="_disqusJS" rel="dns-prefetch" href="https://hegdenischay.disqus.com/embed.js">



<link id="_katexJS"  rel="dns-prefetch" href="/cplusplusstudent/assets/bower_components/katex/dist/katex.min.js">
<link id="_katexCSS" rel="dns-prefetch" href="/cplusplusstudent/assets/bower_components/katex/dist/katex.min.css">

<script>
  function stdOnEnd(n,e){n.onload=function(){this.onerror=this.onload=null,e(null,n)},n.onerror=function(){this.onerror=this.onload=null,e(new Error("Failed to load "+this.src),n)}}function ieOnEnd(n,e){n.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,e(null,n))}}window.setRelStylesheet=function(n){function e(){this.rel="stylesheet"}var o=document.getElementById(n);o.addEventListener?o.addEventListener("load",e,!1):o.onload=e},window._loaded=!1,window.loadJSDeferred=function(n,e){function o(){window._loaded=!0;var o=document.createElement("script");o.src=n,e&&(("onload"in o?stdOnEnd:ieOnEnd)(o,e),o.onload||stdOnEnd(o,e));var t=document.scripts[0];t.parentNode.insertBefore(o,t)}window._loaded?o():window.addEventListener?window.addEventListener("load",o,!1):window.onload=o};
!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);
!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);

  window._noPushState = false;
  window._noDrawer = false;
</script>

<!--[if gt IE 8]><!---->


<script>
  WebFontConfig = {
    
    google: {
      families: ['Roboto+Slab:700','Noto+Sans:400,400i,700,700i']
    },
    

    custom: {
      families: ['icomoon'],
      urls: ['/cplusplusstudent/assets/icomoon/style.css']
    }
  };
  (function(d) {
    var wf = d.createElement('script'), s = d.scripts[0];
    wf.src = "/cplusplusstudent/assets/bower_components/webfontloader/webfontloader.js";
    s.parentNode.insertBefore(wf, s);
  }(document));
</script>
<!--<![endif]-->

<noscript>
  
  

  
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab:700%7CNoto+Sans:400,400i,700,700i">
    <style>
      html { font-family: 'Noto Sans', Helvetica, Arial, sans-serif }
      h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6, .heading { font-family: 'Roboto Slab', Helvetica, Arial, sans-serif }
    </style>
  

  <link rel="stylesheet" href="/cplusplusstudent/assets/icomoon/style.css">
</noscript>

<!--[if gt IE 8]><!---->



  <link rel="stylesheet" href="/cplusplusstudent/assets/css/hydejack-7.5.1.css">



<style id="_pageStyle">

.content a:not(.btn){color:#A85641;border-color:rgba(168,86,65,0.2)}.content a:not(.btn):hover{border-color:#A85641}:focus{outline-color:#A85641}.btn-primary{color:#fff;background-color:#A85641;border-color:#A85641}.btn-primary:focus,.btn-primary.focus{box-shadow:0 0 0 3px rgba(168,86,65,0.5)}.btn-primary:hover,.btn-primary.hover{color:#fff;background-color:#8c4836;border-color:#8c4836}.btn-primary:disabled,.btn-primary.disabled{color:#fff;background-color:#A85641;border-color:#A85641}.btn-primary:active,.btn-primary.active{color:#fff;background-color:#8c4836;border-color:#8c4836}::selection{color:#fff;background:#A85641}::-moz-selection{color:#fff;background:#A85641}

</style>

<!--<![endif]-->




</head>

<body>
  <div class="navbar fixed-top">
  <div class="content">
    <div class="nav-btn-bar">
      <span class="sr-only">Jump to:</span>
      <a id="_menu" class="nav-btn no-hover" href="#_navigation">
        <span class="sr-only">Navigation</span>
        <span class="icon-menu"></span>
      </a>
    </div>
  </div>
</div>


<hy-push-state>
  <main
    id="_main"
    class="content fade-in layout-post"
    role="main"
    data-color="#A85641"
    data-theme-color=""
    
      data-image="/cplusplusstudent/dandelion.png"
      data-overlay
    
    >
    


<article id="post-c-2017-11-17-IOCCC3" class="page post" role="article">
  <header>
    <h1 class="post-title">
      
        IOCCC (1985)
      
    </h1>

    <p class="post-date heading">
      
      <time datetime="2017-11-17T00:30:00+05:30">17 Nov 2017</time>
      
      
      
      
      









in <span>C</span>

      









on <a href="/cplusplusstudent/tag/ioccc/" class="flip-title">IOCCC</a>

    </p>

    



  
    <p class="message" >
      On to 1985

    </p>
  


  </header>

  
    <ul id="markdown-toc">
  <li><a href="#lycklamac" id="markdown-toc-lycklamac"><code class="highlighter-rouge">lycklama.c</code></a>    <ul>
      <li><a href="#analysing-the-code-and-removing-some-obfuscation" id="markdown-toc-analysing-the-code-and-removing-some-obfuscation">Analysing the code, and removing some obfuscation</a></li>
      <li><a href="#decoding-the-mess" id="markdown-toc-decoding-the-mess">Decoding the mess</a></li>
    </ul>
  </li>
  <li><a href="#the-copyright" id="markdown-toc-the-copyright">The copyright</a></li>
</ul>

<h2 id="lycklamac"><code class="highlighter-rouge">lycklama.c</code></h2>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#define o define
#o ___o write
#o ooo (unsigned)
#o o_o_ 1
#o _o_ char
#o _oo goto
#o _oo_ read
#o o_o for
#o o_ main
#o o__ if
#o oo_ 0
#o _o(_,__,___)(void)___o(_,__,ooo(___))
#o __o (o_o_&lt;&lt;((o_o_&lt;&lt;(o_o_&lt;&lt;o_o_))+(o_o_&lt;&lt;o_o_)))+(o_o_&lt;&lt;(o_o_&lt;&lt;(o_o_&lt;&lt;o_o_)))
o_(){_o_ _=oo_,__,___,____[__o];_oo ______;_____:___=__o-o_o_; _______:
_o(o_o_,____,__=(_-o_o_&lt;___?_-o_o_:___));o_o(;__;_o(o_o_,"\b",o_o_),__--);
_o(o_o_," ",o_o_);o__(--___)_oo _______;_o(o_o_,"\n",o_o_);______:o__(_=_oo_(
oo_,____,__o))_oo _____;}
</code></pre></div></div>

<p>This is the code.</p>

<h3 id="analysing-the-code-and-removing-some-obfuscation">Analysing the code, and removing some obfuscation</h3>

<p>Let’s analyse some of the <code class="highlighter-rouge">#define</code>s made.</p>

<ol>
  <li><code class="highlighter-rouge">#o __o (o_o_&lt;&lt;((o_o_&lt;&lt;(o_o_&lt;&lt;o_o_))+(o_o_&lt;&lt;o_o_)))+(o_o_&lt;&lt;(o_o_&lt;&lt;(o_o_&lt;&lt;o_o_)))</code>
 Let’s simplfiy this a bit more. Becuase of the <code class="highlighter-rouge">#define</code>, <code class="highlighter-rouge">o_o_</code> is just <code class="highlighter-rouge">1</code> and the <code class="highlighter-rouge">&lt;&lt;</code> operator is the left shift operator. So this basically becomes:</li>
</ol>

<p><code class="highlighter-rouge">#define __o (1&lt;&lt;((1&lt;&lt;(1&lt;&lt;1))+(1&lt;&lt;1)))+(1&lt;&lt;(1&lt;&lt;(1&lt;&lt;1)))</code></p>

<p>Now, because all the right shifts are just multiplying by two here, we can further simplify it as:</p>

<p><code class="highlighter-rouge">#define __o (1&lt;&lt;((1&lt;&lt;2)+2))+(1&lt;&lt;(1&lt;&lt;2))</code>, which is the same as <code class="highlighter-rouge">#define __o (1&lt;&lt;(4+2))+(1&lt;&lt;4)</code>.</p>

<p>Now, this simplifies to <code class="highlighter-rouge">#define __o (1&lt;&lt;6)+8</code>, which becomes <code class="highlighter-rouge">#define __o 20</code></p>

<p>We can remove all the crazy defines and make it look a bit simpler, after which it looks like this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#define _o(_,__,___)(void)write(_,__,(unsigned)(___))
main()
{
char _=0,__,___,____[20];
goto ______;
_____:___=20-1; 
_______:_o(1,____,__=(_-1&lt;___?_-1:___));

for(;__;_o(1,"\b",1),__--);
_o(1," ",1);

if(--___)goto _______;
_o(1,"\n",1);

______:

if(_=read(0,____,20))
_oo _____;}
</code></pre></div></div>
<p>If you have a keen eye, you will notice that there are three characters here, one array, and one <code class="highlighter-rouge">goto</code>.
Now, time for me to rename some values. I’ll just call them <code class="highlighter-rouge">char1</code>, <code class="highlighter-rouge">char2</code>, <code class="highlighter-rouge">char3</code>, and <code class="highlighter-rouge">arr</code>. I’ll call the <code class="highlighter-rouge">goto</code> label <code class="highlighter-rouge">label</code>. Becuase I have zero creatvity, like whatever I had done until now.</p>

<h3 id="decoding-the-mess">Decoding the mess</h3>

<p>This uses <code class="highlighter-rouge">write</code> and <code class="highlighter-rouge">read</code>, both UNIX system commands, to print out a hello world. At least, that’s what it’s supposed to do.</p>

<p>The “fixed” (read: changed some names) code:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#include &lt;sys/syscall.h&gt;
#include &lt;unistd.h&gt;
#define _o(_,__,___)(void)write(_,__,(unsigned)(___))
int main()
{
char char1=0,char2,char3,arr[20];
goto label;
label2:char3=19;
label3:_o(1,arr,char2=(char1--&lt;char3?char1--:char3));

for(;char2;_o(1,"\b",1),char2--);
_o(1," ",1);

if(--char3)goto label3;
_o(1,"\n",1);

label:

if(char1=read(0,arr,20))
goto label2;
}
</code></pre></div></div>
<p>Apparently, you have to give it very long lines as arguments. But based on what I can see, it will basically write the whole line again, but will be <em>very</em> inefficient in doing so.</p>

<h2 id="the-copyright">The copyright</h2>
<p>Copyright (c) 1984, Landon Curt Noll.
All Rights Reserved.  Permission for personal, educational or non-profit use is
granted provided this this copyright and notice are included in its entirety
and remains unaltered.  All other uses must receive prior permission in writing
from both Landon Curt Noll and Larry Bassel.</p>


  
</article>


<hr class="dingbat related" />




  
     


  <aside class="about related mt4 mb4" role="complementary">
    
    

<div class="author mt4">
  

  
    
  

  

  
  <img
    src="/cplusplusstudent/assets/img/no_scale.jpg"
    class="avatar"
    alt="Nischay Hegde"
    srcset="/cplusplusstudent/assets/img/scaled.jpg 1x,/cplusplusstudent/assets/img/scaledx256.jpg 2x"
    
    
  />


  

  
  
  <h2  class="page-title hr">
    About
  </h2>

  <p>I’m just a student doing his 12th in NIOS (hence the name). My interests are mostly CS-related.</p>


  <div class="sidebar-social">
    <span class="sr-only">Social</span>
<ul>
  
    
    
  

  

  
    













<li>
  <a href="https://github.com/hegdenischay" title="GitHub" class="no-mark-external">
    <span class="icon-github"></span>
    <span class="sr-only">GitHub</span>
  </a>
</li>

  
    













<li>
  <a href="hegdenischay@gmail.com" title="Email" class="no-mark-external">
    <span class="icon-mail"></span>
    <span class="sr-only">Email</span>
  </a>
</li>

  
    













<li>
  <a href="https://<url>/feed.xml" title="RSS" class="no-mark-external">
    <span class="icon-rss2"></span>
    <span class="sr-only">RSS</span>
  </a>
</li>

  
</ul>

  </div>
</div>

  </aside>


  

  
  

  
    




<aside class="related mb4" role="complementary">
  <h2 class="hr">Related Posts</h2>

  <ul class="related-posts">
    
      


<li>
  <a href="/cplusplusstudent/c/2017/11/16/IOCCC2/" class="h4 flip-title">
    <span>IOCCC (1984) Part 2</span>
  </a>
  <time class="heading faded fine" datetime="2017-11-16T00:30:00+05:30">16 Nov 2017</time>
</li>

    
      


<li>
  <a href="/cplusplusstudent/c/2017/11/14/IOCCC-Anonymous/" class="h4 flip-title">
    <span>IOCCC Problems - Anonymous.c (1984)</span>
  </a>
  <time class="heading faded fine" datetime="2017-11-14T00:30:00+05:30">14 Nov 2017</time>
</li>

    
  </ul>
</aside>


  

  
  


    

<aside class="comments related" role="complementary">
  <h2 class="hr">Comments</h2>
  <div id="disqus_thread"></div>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</aside>


    <footer role="contentinfo">
  <hr/>
  
  
  <p><small>Powered by <a class="external" href="https://qwtel.com/hydejack/">Hydejack</a> v<span id="_version">7.5.1</span></small></p>
  <hr class="sr-only"/>
</footer>

  </main>
  <hy-drawer>
  <header id="_sidebar" class="sidebar" role="banner">
    
    <div class="sidebar-bg sidebar-overlay" style="background-color:#A85641;background-image:url(/cplusplusstudent/dandelion.png)"></div>

    <div class="sidebar-sticky">
      <div class="sidebar-about">
        <h2 class="h1"><a href="/cplusplusstudent/">The C++ Student</a></h2>
        
        
          <p class="">
            I’m just a student who wants to delve deeper into the world of Computing, with C++ as my base.

          </p>
        
      </div>

      <nav class="sidebar-nav heading" role="navigation">
        <span class="sr-only">Navigation:</span>
<ul>
  
  
  
  
    
      <li>
        <a
          id="_navigation"
          href="/cplusplusstudent/upcoming/"
          class="sidebar-nav-item"
          
          >
          Upcoming Projects
        </a>
      </li>
    
  
    
      <li>
        <a
          
          href="/cplusplusstudent/ongoing/"
          class="sidebar-nav-item"
          
          >
          Ongoing Projects
        </a>
      </li>
    
  
    
      <li>
        <a
          
          href="/cplusplusstudent/tag/cpp/"
          class="sidebar-nav-item"
          
          >
          C++
        </a>
      </li>
    
  
    
      <li>
        <a
          
          href="/cplusplusstudent/tag/ioccc/"
          class="sidebar-nav-item"
          
          >
          IOCCC
        </a>
      </li>
    
  
    
      <li>
        <a
          
          href="/cplusplusstudent/about/"
          class="sidebar-nav-item"
          
          >
          Hey, I'm Nischay.
        </a>
      </li>
    
  
</ul>

      </nav>

      

      <div class="sidebar-social">
        <span class="sr-only">Social</span>
<ul>
  
    
    
  

  

  
    













<li>
  <a href="https://github.com/hegdenischay" title="GitHub" class="no-mark-external">
    <span class="icon-github"></span>
    <span class="sr-only">GitHub</span>
  </a>
</li>

  
    













<li>
  <a href="hegdenischay@gmail.com" title="Email" class="no-mark-external">
    <span class="icon-mail"></span>
    <span class="sr-only">Email</span>
  </a>
</li>

  
    













<li>
  <a href="https://<url>/feed.xml" title="RSS" class="no-mark-external">
    <span class="icon-rss2"></span>
    <span class="sr-only">RSS</span>
  </a>
</li>

  
</ul>

      </div>
    </div>
  </header>
</hy-drawer>

</hy-push-state>


  

  <!--[if gt IE 9]><!---->
  
  <script>loadJSDeferred('/cplusplusstudent/assets/js/hydejack-7.5.1.js');</script>
  
  <!--<![endif]-->



  
<hr class="sr-only"/>
<h2 class="sr-only">Templates:</h2>

<template id="_animation-template">
  <div class="animation-main fixed-top">
    <div class="content">
      <div class="page"></div>
    </div>
  </div>
</template>

<template id="_loading-template">
  <div class="loading">
    <span class="sr-only">Loading…</span>
    <span class="icon-cog"></span>
  </div>
</template>

<template id="_error-template">
  <div class="page">
    <h1 class="page-title">Error</h1>
    
    
    <p class="lead">
      Sorry, an error occurred while loading: <a class="this-link" href=""></a>.
    </p>
  </div>
</template>

<template id="_back-template">
  <a id="_back" class="back nav-btn no-hover">
    <span class="sr-only">Back</span>
    <span class="icon-arrow-left2"></span>
  </a>
</template>

<template id="_permalink-template">
  <a href="#" class="permalink">
    <span class="sr-only">Permalink</span>
    <span class="icon-link"></span>
  </a>
</template>



</body>
</html>
